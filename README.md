# –°–µ—Ä–≤–∏—Å –∞–Ω–∞–ª–∏–∑–∞ –æ—Ç–∑—ã–≤–æ–≤ –¥–ª—è –ì–∞–∑–ø—Ä–æ–º–±–∞–Ω–∫–∞

–†–µ—à–µ–Ω–∏–µ –∫–µ–π—Å–∞ –¥–ª—è —Ö–∞–∫–∞—Ç–æ–Ω–∞ MISIS LCT - —Å–µ—Ä–≤–∏—Å –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –æ—Ç–∑—ã–≤–æ–≤ –∫–ª–∏–µ–Ω—Ç–æ–≤ –±–∞–Ω–∫–∞ —Å –º—É–ª—å—Ç–∏–ª–µ–π–±–ª –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–µ–π –∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ–º —Ç–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏.

## üéØ –û–ø–∏—Å–∞–Ω–∏–µ —Ä–µ—à–µ–Ω–∏—è

–°–µ—Ä–≤–∏—Å –≤—ã–ø–æ–ª–Ω—è–µ—Ç:
1. **–ú—É–ª—å—Ç–∏–ª–µ–π–±–ª –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—é** –æ—Ç–∑—ã–≤–æ–≤ –ø–æ –±–∞–Ω–∫–æ–≤—Å–∫–∏–º –ø—Ä–æ–¥—É–∫—Ç–∞–º –∏ —É—Å–ª—É–≥–∞–º
2. **–ê–Ω–∞–ª–∏–∑ —Ç–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏** (–ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ/–Ω–µ–π—Ç—Ä–∞–ª—å–Ω–æ/–æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ) –¥–ª—è –∫–∞–∂–¥–æ–π —Ç–µ–º—ã –æ—Ç–¥–µ–ª—å–Ω–æ
3. **REST API** –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–π –≤ —Ä–µ–∂–∏–º–µ inference

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫
- **Backend**: FastAPI, Python 3.11+
- **ML Pipeline**: LangChain, LangGraph
- **LLM**: Google Gemini (gemma-3-27b-it)
- **Deployment**: Docker, Uvicorn

### –ü–æ–¥—Ö–æ–¥ –∫ —Ä–µ—à–µ–Ω–∏—é

#### 1. –ö–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏—è –∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
–ù–∞ –æ—Å–Ω–æ–≤–µ –∞–Ω–∞–ª–∏–∑–∞ –æ—Ç–∑—ã–≤–æ–≤ –≤—ã–¥–µ–ª–µ–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –±–∞–Ω–∫–æ–≤—Å–∫–∏—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤/—É—Å–ª—É–≥:
- –î–µ–±–µ—Ç–æ–≤—ã–µ –∫–∞—Ä—Ç—ã
- –ö—Ä–µ–¥–∏—Ç–Ω—ã–µ –∫–∞—Ä—Ç—ã
- –ò–ø–æ—Ç–µ–∫–∞
- –ê–≤—Ç–æ–∫—Ä–µ–¥–∏—Ç—ã
- –ö—Ä–µ–¥–∏—Ç—ã
- –†–µ—Å—Ç—Ä—É–∫—Ç—É—Ä–∏–∑–∞—Ü–∏—è
- –í–∫–ª–∞–¥—ã
- –ü–µ—Ä–µ–≤–æ–¥—ã
- –î–∏—Å—Ç–∞–Ω—Ü–∏–æ–Ω–Ω–æ–µ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ
- –ú–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
- –û–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ
- –ü—Ä–æ—á–µ–µ

#### 2. –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è LLM-based –ø–æ–¥—Ö–æ–¥ —Å –¥–≤—É—Ö—ç—Ç–∞–ø–Ω—ã–º –∞–≥–µ–Ω—Ç–æ–º:
1. **–≠—Ç–∞–ø 1**: –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –æ—Ç–∑—ã–≤–∞ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º (–º—É–ª—å—Ç–∏–ª–µ–π–±–ª)
2. **–≠—Ç–∞–ø 2**: –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ –¥–ª—è –∫–∞–∂–¥–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –æ—Ç–¥–µ–ª—å–Ω–æ

–ê–≥–µ–Ω—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –Ω–∞ –æ—Å–Ω–æ–≤–µ LangGraph –¥–ª—è –≥–∏–±–∫–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è pipeline.

#### 3. –ë–∞—Ç—á–∏–Ω–≥
–î–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ API –ª–∏–º–∏—Ç–æ–≤ –∏ —É—Å–∫–æ—Ä–µ–Ω–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –±–∞—Ç—á–∏–Ω–≥-—Å—Ç—Ä–∞—Ç–µ–≥–∏—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 10 –æ—Ç–∑—ã–≤–æ–≤).

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
- Python 3.11+
- Poetry
- Docker (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- Google API Key –¥–ª—è Gemini

### –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫

1. **–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π**
```bash
git clone <repo-url>
cd misis-lct
```

2. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**
```bash
poetry install
```

3. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è**
```bash
cp .env.example .env
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env –∏ —É–∫–∞–∂–∏—Ç–µ GOOGLE_API_KEY
```

4. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä**
```bash
poetry run uvicorn lct_gazprombank.main:app --host 0.0.0.0 --port 8000
```

–°–µ—Ä–≤–∏—Å –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É: http://localhost:8000

### –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker

1. **–°–æ–±–µ—Ä–∏—Ç–µ –æ–±—Ä–∞–∑**
```bash
docker build -t lct-gazprombank .
```

2. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä**
```bash
docker run -p 8000:8000 -e GOOGLE_API_KEY=your_key lct-gazprombank
```

## üîå API Endpoints

### POST /predict
–ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –æ—Ç–∑—ã–≤–æ–≤

**–ó–∞–ø—Ä–æ—Å:**
```json
{
    "data": [
        {
            "id": 1,
            "text": "–û—á–µ–Ω—å –ø–æ–Ω—Ä–∞–≤–∏–ª–æ—Å—å –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ –≤ –æ—Ç–¥–µ–ª–µ–Ω–∏–∏, –Ω–æ –º–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —á–∞—Å—Ç–æ –∑–∞–≤–∏—Å–∞–µ—Ç."
        },
        {
            "id": 2,
            "text": "–ö—Ä–µ–¥–∏—Ç–Ω—É—é –∫–∞—Ä—Ç—É –æ–¥–æ–±—Ä–∏–ª–∏ –±—ã—Å—Ç—Ä–æ, –Ω–æ –ª–∏–º–∏—Ç —Å–ª–∏—à–∫–æ–º –º–∞–ª–µ–Ω—å–∫–∏–π."
        }
    ]
}
```

**–û—Ç–≤–µ—Ç:**
```json
{
    "predictions": [
        {
            "id": 1,
            "topics": ["–æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ", "–º–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ"],
            "sentiments": ["–ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ", "–æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ"]
        },
        {
            "id": 2,
            "topics": ["–∫—Ä–µ–¥–∏—Ç–Ω—ã–µ –∫–∞—Ä—Ç—ã"],
            "sentiments": ["–Ω–µ–π—Ç—Ä–∞–ª—å–Ω–æ"]
        }
    ]
}
```

### GET /health
–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–∏—Å–∞

### GET /
–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± API

## üìä –ú–µ—Ç—Ä–∏–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞

–°–æ–≥–ª–∞—Å–Ω–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º –∫–µ–π—Å–∞, —Ä–µ—à–µ–Ω–∏–µ –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç—Å—è –ø–æ:
- **F1-micro** –¥–ª—è –º—É–ª—å—Ç–∏–ª–µ–π–±–ª –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ (–≤–µ—Å 70%)
- **Accuracy** –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ç–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ (–≤–µ—Å 30%)

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –û–ø–∏—Å–∞–Ω–∏–µ | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é |
|------------|----------|--------------|
| `GOOGLE_API_KEY` | API –∫–ª—é—á Google Gemini | *–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ* |
| `LLM_NAME` | –ú–æ–¥–µ–ª—å –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è | `models/gemma-3-27b-it` |
| `PROJECT_NAME` | –ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ | `Review Analysis API` |

## üöÄ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- –í—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏: ‚â§3 –º–∏–Ω—É—Ç—ã –¥–ª—è 250 –æ—Ç–∑—ã–≤–æ–≤
- –ë–∞—Ç—á–∏–Ω–≥: –ø–æ 10 –æ—Ç–∑—ã–≤–æ–≤ –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ API –ª–∏–º–∏—Ç–æ–≤
- Retry-—Å—Ç—Ä–∞—Ç–µ–≥–∏—è –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –∫–≤–æ—Ç

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **VPN**: Google Gemini API –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∏ –†–§. –¢—Ä–µ–±—É–µ—Ç—Å—è VPN.
2. **–õ–∏–º–∏—Ç—ã API**: –ü—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –∫–≤–æ—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è retry-—Å—Ç—Ä–∞—Ç–µ–≥–∏—è —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π 60 —Å–µ–∫.
3. **–ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è**: –í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏ —Ç–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–æ—Ä–º–∞–ª–∏–∑—É—é—Ç—Å—è (lowercase, strip).

## üìù –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
misis-lct/
‚îú‚îÄ‚îÄ data/
‚îÇ   ‚îî‚îÄ‚îÄ categories.txt          # –°–ø–∏—Å–æ–∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îî‚îÄ‚îÄ lct_gazprombank/
‚îÇ       ‚îú‚îÄ‚îÄ agent/              # LangGraph –∞–≥–µ–Ω—Ç
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ graph.py        # –ì—Ä–∞—Ñ –∞–≥–µ–Ω—Ç–∞
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ prompts.py      # –ü—Ä–æ–º–ø—Ç—ã –¥–ª—è LLM
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ state.py        # –°–æ—Å—Ç–æ—è–Ω–∏–µ –∞–≥–µ–Ω—Ç–∞
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ utils.py        # –£—Ç–∏–ª–∏—Ç—ã –∏ LLM wrapper
‚îÇ       ‚îú‚îÄ‚îÄ core/               # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ       ‚îú‚îÄ‚îÄ routers/            # API —Ä–æ—É—Ç—ã
‚îÇ       ‚îú‚îÄ‚îÄ schemas/            # Pydantic –º–æ–¥–µ–ª–∏
‚îÇ       ‚îú‚îÄ‚îÄ services/           # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ       ‚îú‚îÄ‚îÄ utils/              # –û–±—â–∏–µ —É—Ç–∏–ª–∏—Ç—ã
‚îÇ       ‚îî‚îÄ‚îÄ main.py             # FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îú‚îÄ‚îÄ Dockerfile
‚îú‚îÄ‚îÄ pyproject.toml
‚îî‚îÄ‚îÄ README.md
```

## üë• –ê–≤—Ç–æ—Ä—ã

- **avolxn** - vlad.eldashov2303@mail.ru

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

–ü—Ä–æ–µ–∫—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω –¥–ª—è —É—á–∞—Å—Ç–∏—è –≤ —Ö–∞–∫–∞—Ç–æ–Ω–µ MISIS LCT.

